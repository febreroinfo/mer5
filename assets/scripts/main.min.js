"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}function simulateClick(e){var t=new window.MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function initialize(){console.log("Welcome! ðŸ‘‹"),activateStickyScrollPadding(),getContactEmail(),getNetworkStatus()}function activateStickyScrollPadding(){var e=document.querySelector(".navbar");e&&(e=e.offsetHeight,document.documentElement.style.setProperty("--scroll-padding","".concat(e,"px")))}"serviceWorker"in navigator&&navigator.serviceWorker.register("./serviceWorker.js").then(function(){console.log("Service Worker is Registered")}),document.addEventListener("keydown",function(e){var t=e.target;"Enter"===e.key&&t.classList.contains("skip")&&(simulateClick(t),history.pushState?history.pushState("",document.title,window.location.pathname):location="/")}),window.addEventListener("load",initialize);var menu=document.querySelector("button#menu");function getOverlay(){var e=document.querySelector("#info[data-open]");"false"==e.getAttribute("data-open")?(e.setAttribute("data-open","true"),e.previousElementSibling.setAttribute("data-open","false"),menu.textContent="Close Info"):(e.setAttribute("data-open","false"),e.previousElementSibling.setAttribute("data-open","true"),menu.textContent="Info")}function getContactEmail(){var e=document.querySelectorAll("[data-email]");Array.from(e).forEach(function(t){function r(e){t.id==e.target.id?(e=(e="helloATfebreroDOTinfo").replace(/AT/,"@").replace(/DOT/,"."),t.setAttribute("data-email","true"),t.setAttribute("href","mailto:".concat(e))):(t.setAttribute("data-email","false"),t.removeAttribute("data-value"),t.removeAttribute("href"),t.removeAttribute("rel"),t.removeAttribute("target"))}document.addEventListener("click",function(e){r(e)}),document.addEventListener("keydown",function(e){"Enter"===e.key&&r(e)})})}function getNetworkStatus(){var e=document.querySelector("#status"),t=document.querySelector("#online"),r=document.querySelector("#offline");function n(){"offline"==(navigator.onLine?"online":"offline")?(e.setAttribute("data-open","true"),r.setAttribute("data-open","true"),t.setAttribute("data-open","false")):(e.setAttribute("data-open","true"),t.setAttribute("data-open","true"),r.setAttribute("data-open","false"),setTimeout(function(){t.setAttribute("data-open","false"),e.setAttribute("data-open","false")},5800))}window.addEventListener("online",n),window.addEventListener("offline",n)}menu&&menu.addEventListener("click",getOverlay);var firstFile,secondFile,fileKey,firstUpload=document.querySelector("#firstFile"),secondUpload=document.querySelector("#secondFile");function displayValidMessage(e,t){var r=document.querySelector("#messageValid".concat(e.id)),n=document.querySelector("#messageInvalid".concat(e.id)),o=document.createElement("span");o.setAttribute("id","messageValid".concat(e.id)),o.textContent=t,e.parentNode.appendChild(o),r&&r.remove(),n&&n.remove()}function displayInvalidMessage(e){var t=document.querySelector("#messageInvalid".concat(e.id)),r=document.querySelector("#messageValid".concat(e.id)),n=document.createElement("span");n.setAttribute("id","messageInvalid".concat(e.id)),n.textContent="Not a valid JSON file.",e.parentNode.appendChild(n),t&&t.remove(),r&&r.remove()}function uniqueData(e,t,r){return r.indexOf(e)===t}function getFileKeys(e){var t=[];e.map(function(e){t.push(Object.keys(e))}),getKeyDropdown(t.flat(1).filter(uniqueData))}function getKeyDropdown(e){var t=document.querySelector("#fileKey"),r=document.createElement("div"),n=(r.setAttribute("class","dropdown"),document.createElement("label")),o=(n.setAttribute("for","text"),n.textContent="Select Common Key of Files",document.createElement("div")),i=(o.setAttribute("class","dropdown__group"),document.createElement("input")),a=(i.setAttribute("id","text"),i.setAttribute("type","text"),i.setAttribute("readonly",""),i.setAttribute("class","dropdown__input"),i.setAttribute("placeholder","Choose Key..."),document.createElement("button")),d=(a.setAttribute("id","select"),a.setAttribute("type","button"),a.setAttribute("class","dropdown__button"),a.setAttribute("aria-expanded","false"),document.createElement("span")),l=(d.setAttribute("class","dropdown__icon"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-chevron-down"><polyline points="6 9 12 15 18 9"/></svg>',document.createElement("div"));l.setAttribute("class","dropdown__option"),l.setAttribute("id","selection"),e.map(function(e){var t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("class","dropdown__items"),t.setAttribute("value",e),t.textContent=e,l.appendChild(t),t.addEventListener("click",function(){i.value=t.value,fileKey=t.value;var e=document.querySelector("#fileMerge");return 0==e.getAttribute("aria-hidden")?e.setAttribute("aria-hidden","true"):e.setAttribute("aria-hidden","false"),fileKey})}),t.appendChild(r),r.appendChild(n),r.appendChild(o),o.appendChild(i),o.appendChild(a),a.appendChild(d),r.appendChild(l),getDynamicDropdown()}function removeKeyDropdown(){var e=document.querySelector("#fileKey");if(e&&e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild)}function getDynamicDropdown(){var n=document.querySelector("#select");n&&document.addEventListener("click",function(e){var t,r=document.querySelector("#selection");r&&(t=n.getAttribute("aria-expanded"),e.target.id===n.id&&"false"===t?(n.setAttribute("aria-expanded","true"),r.classList.add("is__active")):(n.setAttribute("aria-expanded","false"),r.classList.remove("is__active")))})}firstUpload&&firstUpload.addEventListener("change",function(e){var t=new FileReader;removeKeyDropdown(),t.onload=function(e){try{firstFile=JSON.parse(e.target.result);var t=firstUpload.files[0].name;return displayValidMessage(firstUpload,t),getFileKeys(firstFile),firstFile}catch(e){displayInvalidMessage(firstUpload)}},e.target.files[0]&&t.readAsText(e.target.files[0])}),secondUpload&&secondUpload.addEventListener("change",function(e){var t=new FileReader;t.onload=function(e){try{secondFile=JSON.parse(e.target.result);var t=secondUpload.files[0].name;return displayValidMessage(secondUpload,t),secondFile}catch(e){displayInvalidMessage(secondUpload)}},e.target.files[0]&&t.readAsText(e.target.files[0])});var mergeUpload=document.querySelector("#fileMerge");function mergeFiles(e,t,r){n=t;var n,t=e.map(function(t){return _objectSpread(_objectSpread({},n.find(function(e){return e[r]===t[r]&&e})),t)});displayPreview(JSON.stringify(t,void 0,2)),document.querySelector("#output")||exportToJSON(t)}function displayPreview(e){document.querySelector("#preview").value=e}function exportToJSON(e){"object"===_typeof(e)&&(e=JSON.stringify(e,void 0,4));var e=new Blob([e],{type:"text/json"}),t=document.createElement("a");t.setAttribute("id","output"),t.text="Download Merged JSON",t.download="mergedJSONarray.json",t.className="form__download",t.href=window.URL.createObjectURL(e),t.dataset.downloadURL=["text/json",t.download,t.href].join(":"),document.querySelector("#download").appendChild(t)}mergeUpload&&mergeUpload.addEventListener("click",function(){mergeFiles(firstFile,secondFile,fileKey)});var mergeClear=document.querySelector("#clear");function clearMerge(){document.querySelector("#merge").reset(),document.querySelector("#firstFile").parentNode.children[2].remove(),document.querySelector("#secondFile").parentNode.children[2].remove(),removeKeyDropdown(),document.querySelector("#fileMerge").setAttribute("aria-hidden","true"),document.querySelector("#download").remove()}mergeClear&&mergeClear.addEventListener("click",function(){clearMerge()});
//# sourceMappingURL=main.min.map
